---
title: "How to Rename Multiple Observations in a Dataframe in R"
author: "Myfanwy Johnston"
date: "Tuesday, May 05, 2015"
output: html_document
---

There are lots of posts that cover how to rename columns or variables of a dataframe in R, but I didn't come up with much when I ran a search for "how to rename observations of a dataframe in r."  Most of this is because I should have searched for something like "how to replace character strings in r", but let's pretend you know as little as I did and that's how you find yourself here today.

I am a field ecologist, and I work with acoustic telemetry stations.  I had a dataframe of station IDs and some other associated variables.  I wanted to rename the stations, but the only way I could think of to do that was to make the first column (station) into row names, and I wasn't in to that.  Here's what my dataframe looked like:
```{r set-options, echo=FALSE, cache=FALSE}
options(width = 1000)
```

```{r, autodep=TRUE, echo=FALSE, message=FALSE, warning=FALSE, comment=NA}
library(readr)
library(plyr)
library(dplyr)
library(lubridate)
library(readxl)
library(stringr)
d <- read_excel("Yolo_69khzAllDeployments_GH.xlsx", sheet="ind_deployments")
d
```

I wanted to replace the station names because in the raw data, the station names had lots of spaces and parentheses, which are not very R-friendly:

```{r, comment=NA}
s <- unique(d$station)
s
```

See?  Terrible.  So now, I'll create a vector of the names I want the stations to have ("s2"), then replace the vector of bad versions ("s") using mapvalues(), a handy little function from Hadley Wickham's [plyr package](http://plyr.had.co.nz/):

```{r, comment=NA}
s2 <- c("Abv_lisbon", "Abv_rstr", "Abv_swanston", "Base_TD", "BCE", "BCE2", "BCW", "BCW2", "Cache_creek",
        "I80_1", "I80_2", "I80_3", "I80_4", "Knaggs", "Lisbon", "Levee_marker", "Putah_creek", "RSTR", "Swanston", 
        "Wallace_weir", "Willow_slough")
d$station <- plyr::mapvalues(d$station, from=s, to=s2)
unique(d$station)
```

Sweet!  Observations renamed, and now I can move on.  But let's say you only wanted to rename a single observation type.  You can still do that with mapvalues(), but there is another alternative using str_replace() from Hadley Wickham's [stringr package:](http://stringr.had.co.nz/)
```{r, comment=NA}
ww <- filter(d, station=="Wallace_weir") #creates a subset dataframe for just the Wallace Weir observations
ww$station <- str_replace(ww$station, "Wallace Weir", "Wallace_weir") #replace the bad station name with the good one.
```

Hope this is helpful!

